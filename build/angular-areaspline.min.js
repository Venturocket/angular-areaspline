/*! angular-areaspline 2013-08-28 */
angular.module("vr.directives.areaspline",["d3"]).directive("areaspline",function(){return{restrict:"EA",replace:!0,scope:{data:"="},template:"<svg class='areaspline'><g d3 d3-data='histData' d3-renderer='render'><path></path></g></svg>",link:function(a,b,c){a.area=d3.svg.area().interpolate("basis").x(function(b){return a.x(b[0])}).y0(function(){return a.height}).y1(function(b){return a.y(b[1])}),a.render=function(d,e){a.width=angular.isUndefined(c.width)?100:c.width,a.height=angular.isUndefined(c.width)?100:c.height,a.x=d3.scale.linear().range([0,a.width]),a.y=d3.scale.linear().range([a.height,0]),a.x.domain([0,e.length-1]),a.y.domain(d3.extent(e,function(a){return a[1]})),b.find("path").attr("d",a.area(e))},a.$watch("data",function(b){b&&(a.histData=b.map(function(a,b){return[b,a]}))},!0)}}});