/**
 * Author: Derek Gould
 * Date: 8/26/13
 * Time: 5:24 PM
 */
describe("Areaspline Directive", function() {

	var $compile;
	var $rootScope;
	var element;

	var initialData = "M0,100L4.166666666666666,91.66666666666664C8.333333333333332,83.33333333333331,16.666666666666664,66.66666666666666,24.999999999999996,49.99999999999999C33.33333333333333,33.33333333333333,41.66666666666666,16.666666666666664,49.99999999999999,16.666666666666664C58.33333333333333,16.666666666666664,66.66666666666666,33.33333333333333,75,49.99999999999999C83.33333333333333,66.66666666666666,91.66666666666666,83.33333333333331,95.83333333333331,91.66666666666666L100,100L100,100L95.83333333333331,99.99999999999997C91.66666666666666,99.99999999999999,83.33333333333333,99.99999999999999,74.99999999999999,99.99999999999997C66.66666666666666,99.99999999999999,58.33333333333333,99.99999999999999,49.99999999999999,99.99999999999997C41.66666666666666,99.99999999999999,33.33333333333333,99.99999999999999,24.999999999999996,99.99999999999997C16.666666666666664,99.99999999999999,8.333333333333332,99.99999999999999,4.166666666666666,99.99999999999997L0,100Z";
	var updatedData = "M0,73.6842105263158L2.3809523809523805,74.56140350877193C4.761904761904761,75.43859649122807,9.523809523809522,77.19298245614036,14.285714285714283,78.94736842105263C19.047619047619044,80.7017543859649,23.809523809523803,82.45614035087719,28.571428571428566,71.05263157894738C33.33333333333333,59.649122807017555,38.09523809523809,35.087719298245624,42.85714285714285,21.052631578947377C47.61904761904761,7.017543859649132,52.38095238095237,3.508771929824566,57.142857142857125,7.017543859649127C61.90476190476189,10.526315789473689,66.66666666666666,21.052631578947377,71.42857142857142,37.71929824561404C76.19047619047618,54.385964912280706,80.95238095238093,77.19298245614034,85.7142857142857,77.19298245614036C90.47619047619047,77.19298245614034,95.23809523809523,54.385964912280706,97.61904761904759,42.982456140350884L100,31.57894736842107L100,100L97.61904761904759,99.99999999999997C95.23809523809523,99.99999999999999,90.47619047619047,99.99999999999999,85.7142857142857,99.99999999999997C80.95238095238093,99.99999999999999,76.19047619047618,99.99999999999999,71.42857142857142,99.99999999999997C66.66666666666666,99.99999999999999,61.90476190476189,99.99999999999999,57.142857142857125,99.99999999999997C52.38095238095237,99.99999999999999,47.61904761904761,99.99999999999999,42.85714285714285,99.99999999999997C38.09523809523809,99.99999999999999,33.33333333333333,99.99999999999999,28.571428571428566,99.99999999999997C23.809523809523803,99.99999999999999,19.047619047619044,99.99999999999999,14.285714285714283,99.99999999999997C9.523809523809522,99.99999999999999,4.761904761904761,99.99999999999999,2.3809523809523805,99.99999999999997L0,100Z";

	beforeEach(module('vr.directives.areaspline'));

	beforeEach(inject(function(_$compile_, _$rootScope_) {
		$compile = _$compile_;
		$rootScope = _$rootScope_;
		$rootScope.data = [0,1,2,1,0];
		element = $compile("<areaspline data='data' width='100' height='100'></areaspline>")($rootScope);
		$rootScope.$digest();
	}));

	it('should create a new areaspline', function() {
		expect(element.prop('tagName')).toBe('svg');
		expect(element.find('g').length).toBe(1);
		expect(element.find('path').length).toBe(1);
		expect(element.find('path').attr('d')).toBe(initialData);
	});

	it('should update the data', function() {
		$rootScope.$apply(function() { $rootScope.data = [6,5,4,18,20,14,1,14]; });
		expect(element.find('path').attr('d')).toBe(updatedData);
	});

});
